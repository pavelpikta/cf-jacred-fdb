# cf-jacred-fbd (–†—É—Å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

> –Ø–∑—ã–∫–∏: üá∑üá∫ –†—É—Å—Å–∫–∏–π | [English](./README.md)

<!-- markdownlint-disable MD033 -->

[![Cloudflare Pages](https://img.shields.io/badge/Cloudflare-Pages-orange?logo=cloudflare&logoColor=white)](https://developers.cloudflare.com/pages/)
[![Runtime](https://img.shields.io/badge/Runtime-Workers-black?logo=cloudflare)](https://developers.cloudflare.com/workers/)
![TypeScript](https://img.shields.io/badge/TypeScript-5.x-3178c6?logo=typescript&logoColor=white)
![esbuild](https://img.shields.io/badge/Bundler-esbuild-ffcf00)
![ESLint](https://img.shields.io/badge/Lint-ESLint-4B32C3?logo=eslint&logoColor=white)
![Prettier](https://img.shields.io/badge/Format-Prettier-f7b93e?logo=prettier&logoColor=black)
![Status](https://img.shields.io/badge/–°—Ç–∞—Ç—É—Å-Alpha-blue)
![License](https://img.shields.io/badge/–õ–∏—Ü–µ–Ω–∑–∏—è-TBD-lightgrey)
[![Architecture](https://img.shields.io/badge/–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-EN-blueviolet)](./ARCHITECTURE.md)
[![Architecture RU](https://img.shields.io/badge/–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-RU-blueviolet)](./ARCHITECTURE.ru.md)
[![English](https://img.shields.io/badge/Docs-English-lightgreen)](./README.md)

> ‚ö†Ô∏è –†–∞–Ω–Ω—è—è –∞–ª—å—Ñ–∞: **–ø—É–±–ª–∏—á–Ω–æ–µ API –∏ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è**. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∫–æ–º–º–∏—Ç, –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏—Ç–µ –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

Edge‚Äë—É—Å–∫–æ—Ä–µ–Ω–Ω—ã–π UI –¥–ª—è –º–µ—Ç–∞–ø–æ–∏—Å–∫–∞ —Ç–æ—Ä—Ä–µ–Ω—Ç —Ä–∞–∑–¥–∞—á + –¥–∞—à–±–æ—Ä–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—Ä–µ–∫–µ—Ä–æ–≤ –Ω–∞ –±–∞–∑–µ Cloudflare Pages –∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ `_worker.js` (API gateway, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–º–æ—â–Ω–∏–∫–∏ TorrServer) –ø–æ–≤–µ—Ä—Ö HTTP –∞–ø—Å—Ç—Ä–∏–º–∞.

---

## üìö –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–∫–ª—é—á–µ–≤—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
3. [–ü—É–±–ª–∏—á–Ω—ã–µ HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã](#–ø—É–±–ª–∏—á–Ω—ã–µ-http-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
4. [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
5. [–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è](#—Å—Ç—Ä–∞—Ç–µ–≥–∏—è-–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)
6. [–°–±–æ—Ä–∫–∞ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã](#—Å–±–æ—Ä–∫–∞-–∏-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
7. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç-–ª–æ–∫–∞–ª—å–Ω–æ)
8. [–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#–∑–∞–≥–æ–ª–æ–≤–∫–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
9. [–ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã —Å API –∫–ª—é—á–æ–º](#–ø–æ—Ç–æ–∫-—Ä–∞–±–æ—Ç—ã-—Å-api-–∫–ª—é—á–æ–º)
10. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TorrServer](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-torrserver)
11. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫—Ä–∞—Ç–∫–æ)](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∫—Ä–∞—Ç–∫–æ)
12. [–ü—Ä–∏–º–µ—Ä—ã JSON –æ—à–∏–±–æ–∫](#–ø—Ä–∏–º–µ—Ä—ã-json-–æ—à–∏–±–æ–∫)
13. [–û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞](#–æ—Ç–ª–∞–¥–∫–∞-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
14. [–ò–¥–µ–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π](#–∏–¥–µ–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π)
15. [–í–∫–ª–∞–¥ / Contributing](#–≤–∫–ª–∞–¥--contributing)
16. [FAQ](#faq)
17. [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)
18. [–ü–æ–¥–¥–µ—Ä–∂–∫–∞ / Issues](#–ø–æ–¥–¥–µ—Ä–∂–∫–∞--issues)

---

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

1. –ü–æ–∏—Å–∫ (`index.html`) ‚Äì –º–µ—Ç–∞–ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π API –∫–ª—é—á–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–æ–π magnet –ø—Ä—è–º–æ –≤ TorrServer.
2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (`stats.html`) ‚Äì –¥–∞—à–±–æ—Ä–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—Ä–µ–∫–µ—Ä–æ–≤: –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –∏—Ç–æ–≥–∏, —Ç–µ–º—ã, –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π/—à–∏—Ä–æ–∫–∏–π —Ä–µ–∂–∏–º—ã, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª, –æ—Ñ—Ñ–ª–∞–π–Ω –∫–µ—à –ª–æ–∫–∞–ª—å–Ω–æ.

Worker —Ä–µ—à–∞–µ—Ç:

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π API –∫–ª—é—á; —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∞–ø—Å—Ç—Ä–∏–º–∞)
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø—É—Ç–µ–π `/api/...`
- –ü—Ä—è–º–æ–π passthrough –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—É—Ç–µ–π (`/stats`, `/sync` –ø—Ä–µ—Ñ–∏–∫—Å—ã)
- –£–º–Ω–æ–µ edge + browser –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (ETag + 304)
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –æ—á–∏—Å—Ç–∫–∞ hop‚Äëby‚Äëhop
- POST –ø–æ–º–æ—â–Ω–∏–∫–∏ TorrServer —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Cloudflare Access
- –ú–∞–Ω–∏—Ñ–µ—Å—Ç –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Å—Å–µ—Ç–æ–≤

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ú—É–ª—å—Ç–∏—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –∫–∞—á–µ—Å—Ç–≤–æ, –æ–∑–≤—É—á–∫–∞, –≥–æ–¥, —Å–µ–∑–æ–Ω, —Ç—Ä–µ–∫–µ—Ä, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –≤–∫–ª—é—á–∞—é—â–∏–µ/–∏—Å–∫–ª—é—á–∞—é—â–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: —Å–∏–¥—ã, —Ä–∞–∑–º–µ—Ä, –¥–∞—Ç–∞ (persist –≤ `localStorage`)
- –î–∞—à–±–æ—Ä–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (10–º –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ), —Ä–∞–∑–Ω—ã–µ —Ä–µ–∂–∏–º—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, —Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è —Ç–µ–º—ã, –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π/—à–∏—Ä–æ–∫–∏–π —Ä–µ–∂–∏–º, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ñ–æ—Ä–º–∞—Ç–∞ —á–∏—Å–µ–ª, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Ç–æ–≥–∏, –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–∞–±–æ—Ç–∞ —Å API –∫–ª—é—á–æ–º: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ, –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `/api/conf`
- TorrServer: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ magnet, –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
- Edge –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ + ETag
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Å—Å–µ—Ç—ã —Å –¥–æ–ª–≥–∏–º —Å—Ä–æ–∫–æ–º
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## –ü—É–±–ª–∏—á–Ω—ã–µ HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ü—É—Ç—å                       | –ú–µ—Ç–æ–¥ | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                                 |
| -------------------------- | ----- | ------------------ | ---------------------------------------- |
| `/`                        | GET   | –°—Ç–∞—Ç–∏–∫–∞            | UI –ø–æ–∏—Å–∫–∞                                |
| `/stats` / `/stats.html`   | GET   | –°—Ç–∞—Ç–∏–∫–∞            | –î–∞—à–±–æ—Ä–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏                       |
| `/api/conf`                | GET   | API (–ø—Ä–æ–∫—Å)        | –î–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π + –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–∞ |
| `/api/torrents?search=...` | GET   | API (–ø—Ä–æ–∫—Å)        | –ü–æ–∏—Å–∫                                    |
| `/api/stats/torrents`      | GET   | API (–ø—Ä–æ–∫—Å)        | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–µ–∫–µ—Ä–æ–≤                      |
| `/api/torrserver/add`      | POST  | Worker             | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ magnet –≤ TorrServer           |
| `/api/torrserver/test`     | POST  | Worker             | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ / –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏            |
| `/api/*` (–ø—Ä–æ—á–µ–µ)          | \*    | API (–ø—Ä–æ–∫—Å)        | –û–±—â–∏–π –∞–ø—Å—Ç—Ä–∏–º                            |
| `/sync*`                   | \*    | –ü—Ä—è–º–æ–π passthrough | –ú–∏–Ω—É–µ—Ç –ª–æ–≥–∏–∫—É `/api`                     |

–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç–æ–¥—ã ‚Üí 405 JSON.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è                                        | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                               |
| ------------------------------------------------- | ----------- | ---------------------------------------- |
| `UPSTREAM_ORIGIN`                                 | –î–∞          | –ë–∞–∑–æ–≤—ã–π –∞–ø—Å—Ç—Ä–∏–º (–±–µ–∑ `/`)                |
| `API_KEY`                                         | –ù–µ—Ç         | –í–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∫–ª—é—á–∞                  |
| `UPSTREAM_TIMEOUT_MS`                             | –ù–µ—Ç         | –¢–∞–π–º–∞—É—Ç –∞–ø—Å—Ç—Ä–∏–º–∞ (–ø–æ —É–º–æ–ª—á. 30000)       |
| `TORRSERVER_TIMEOUT_MS`                           | –ù–µ—Ç         | –¢–∞–π–º–∞—É—Ç TorrServer (–ø–æ —É–º–æ–ª—á. 15000)     |
| `CF_ACCESS_CLIENT_ID` / `CF_ACCESS_CLIENT_SECRET` | –ù–µ—Ç         | –°–µ—Ä–≤–∏—Å‚Äë—Ç–æ–∫–µ–Ω—ã –¥–ª—è –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ TorrServer |

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

| –û–±—ä–µ–∫—Ç     | Cache-Control                         | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                      |
| ---------- | ------------------------------------- | ------------------------------- |
| HTML       | `no-cache, must-revalidate`           | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ     |
| –•–µ—à –∞—Å—Å–µ—Ç—ã | `public, max-age=31536000, immutable` | –î–æ–ª–≥–∏–π —Å—Ä–æ–∫, –∫–æ–Ω—Ç–µ–Ω—Ç –∞–¥—Ä–µ—Å—É–µ–º—ã–π |
| GET API    | `public, max-age=60, s-maxage=300`    | Edge –∫–µ—à –≤ `caches.default`     |
| 304        | ‚Äî                                     | –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `Vary`          |

–ö–ª—é—á –∫–µ—à–∞ –æ—á–∏—â–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `apikey`, `api_key`, `_`.

## –°–±–æ—Ä–∫–∞ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

| –ó–∞–¥–∞—á–∞     | –ö–æ–º–∞–Ω–¥–∞              |
| ---------- | -------------------- |
| Dev        | `npm run dev`        |
| Typecheck  | `npm run typecheck`  |
| Lint       | `npm run lint`       |
| Format     | `npm run format`     |
| Prod build | `npm run build:prod` |

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ

```bash
npm install
npm run dev
```

## –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ó–∞–≥–æ–ª–æ–≤–æ–∫                    | –ó–Ω–∞—á–µ–Ω–∏–µ                                                    |
| ---------------------------- | ----------------------------------------------------------- |
| X-Content-Type-Options       | nosniff                                                     |
| Referrer-Policy              | no-referrer                                                 |
| X-Frame-Options              | DENY                                                        |
| Cross-Origin-Opener-Policy   | same-origin                                                 |
| Cross-Origin-Resource-Policy | same-origin                                                 |
| Permissions-Policy           | geolocation=(), microphone=(), camera=(), fullscreen=(self) |

–ü–ª–∞–Ω—ã: CSP, SRI, rate limiting / Turnstile.

## –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã —Å API –∫–ª—é—á–æ–º

1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/api/conf` (—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º –∫–ª—é—á–æ–º –µ—Å–ª–∏ –µ—Å—Ç—å)
2. –û—Ç–≤–µ—Ç: `{ requireApiKey, apikey }`
3. –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ ‚Üí –º–æ–¥–∞–ª–∫–∞ –≤–≤–æ–¥–∞
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –≤—ã–∑–æ–≤–æ–º `/api/conf?apikey=...`
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `localStorage` –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫ –±—É–¥—É—â–∏–º –∑–∞–ø—Ä–æ—Å–∞–º (–∞ –∑–∞—Ç–µ–º —É–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∞–ø—Å—Ç—Ä–∏–º–æ–º)

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TorrServer

| –ü—É—Ç—å                   | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                    |
| ---------------------- | ----------------------------- |
| `/api/torrserver/add`  | –û—Ç–ø—Ä–∞–≤–∫–∞ magnet –≤ `/torrents` |
| `/api/torrserver/test` | –ü—Ä–æ–≤–µ—Ä–∫–∞ `/echo` + –≤–µ—Ä—Å–∏—è     |

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: —Ç–∞–π–º–∞—É—Ç—ã, Basic Auth, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ Cloudflare Access —Ç–æ–∫–µ–Ω—ã, —Ä–µ–∂–∏–º debug.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫—Ä–∞—Ç–∫–æ)

–ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏: [`ARCHITECTURE.ru.md`](./ARCHITECTURE.ru.md) (–∏–ª–∏ –∞–Ω–≥–ª. –≤–µ—Ä—Å–∏—è `ARCHITECTURE.md`).

```text
statsAsset ‚Üí staticAsset ‚Üí methodAndCors ‚Üí torrserver ‚Üí confEndpoint ‚Üí upstream
```

## –ü—Ä–∏–º–µ—Ä—ã JSON –æ—à–∏–±–æ–∫

| –°—Ü–µ–Ω–∞—Ä–∏–π           | –ü—Ä–∏–º–µ—Ä                                                                                             |
| ------------------ | -------------------------------------------------------------------------------------------------- |
| –ù–µ–≤–µ—Ä–Ω—ã–π –º–µ—Ç–æ–¥     | `{ "error": "–ú–µ—Ç–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è", "code": "method_not_allowed" }`                             |
| –¢–∞–π–º–∞—É—Ç –∞–ø—Å—Ç—Ä–∏–º–∞   | `{ "error": "–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∞–ø—Å—Ç—Ä–∏–º–∞", "code": "upstream_timeout", "timeoutMs": 30000 }` |
| –¢–∞–π–º–∞—É—Ç TorrServer | `{ "error": "–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è TorrServer", "code": "torrserver_timeout" }`                 |

## –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

| –ù—É–∂–Ω–æ                     | –ö–∞–∫                             |
| ------------------------- | ------------------------------- |
| –ü–æ–∫–∞–∑–∞—Ç—å –∞–ø—Å—Ç—Ä–∏–º URL      | –ó–∞–≥–æ–ª–æ–≤–æ–∫ `x-debug-upstream: 1` |
| –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏           | `Server-Timing`                 |
| –§–æ—Ä—Å–∏—Ä–æ–≤–∞—Ç—å —Å–≤–µ–∂–∏–π fetch  | `Cache-Control: no-cache`       |
| –ü–æ–¥—Ä–æ–±–Ω—ã–π TorrServer JSON | `{"debug": true}` –≤ —Ç–µ–ª–µ add    |

## –ò–¥–µ–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

- CSP + SRI
- Service Worker (–æ—Ñ–ª–∞–π–Ω –∏—Å—Ç–æ—Ä–∏—è)
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è / –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è
- i18n (JSON —Å–ª–æ–≤–∞—Ä–∏)
- Rate limiting/Turnstile
- –ú–µ—Ç—Ä–∏–∫–∏ / –ª–æ–≥–≥–∏–Ω–≥

## –í–∫–ª–∞–¥ / Contributing

1. –§–æ—Ä–∫ / –≤–µ—Ç–∫–∞
2. `npm run typecheck` + `npm run build`
3. –î–ª—è –ø—Ä–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏: `npm run build:prod`
4. –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ / –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ / env
5. –ü–∏—à–∏—Ç–µ –ø–æ—è—Å–Ω—è—é—â–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

## FAQ

**–ü–æ—á–µ–º—É –∫–ª—é—á –≤ query, –∞ –Ω–µ –∑–∞–≥–æ–ª–æ–≤–∫–µ?** –ü—Ä–æ—â–µ –∏ –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å/–¥–µ–ª–∏—Ç—å—Å—è URL.

**–ü–æ—á–µ–º—É HTTP –∞–ø—Å—Ç—Ä–∏–º?** TLS –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –Ω–∞ edge Cloudflare.

**–ï—Å—Ç—å –ª–∏ rate limiting?** –ü–æ–∫–∞ –Ω–µ—Ç.

**–ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–ª—é—á –≤ preview?** –î–∞ ‚Äî –æ—á–∏—Å—Ç–∏—Ç–µ `API_KEY`.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü–æ–∫–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è MIT –∏–ª–∏ Apache 2.0).

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ / Issues

–°–æ–∑–¥–∞–π—Ç–µ issue —Å:

- –®–∞–≥–∞–º–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –û–∂–∏–¥–∞–µ–º—ã–º/—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º
- URL –∏ –º–µ—Ç–æ–¥–∞–º–∏
- –í–∞–∂–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ / JSON (–±–µ–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) —Å–∫—Ä–∏–Ω—à–æ—Ç—ã / HAR

---

–£–¥–∞—á–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üöÄ

---

üîÅ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫: [English version](./README.md)
