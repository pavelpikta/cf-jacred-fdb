# cf-jacred-fdb

> –Ø–∑—ã–∫–∏: üá∑üá∫ –†—É—Å—Å–∫–∏–π | [English](./README.md)

[![CI](https://img.shields.io/github/actions/workflow/status/pavelpikta/cf-jacred-fdb/ci.yml?branch=main&logo=github&label=CI)](https://github.com/pavelpikta/cf-jacred-fdb/actions)
[![Cloudflare Pages](https://img.shields.io/badge/Cloudflare-Pages-orange?logo=cloudflare&logoColor=white)](https://developers.cloudflare.com/pages/)
[![Cloudflare Workers](https://img.shields.io/badge/Cloudflare-Workers-black?logo=cloudflare)](https://developers.cloudflare.com/workers/)
![TypeScript](https://img.shields.io/badge/TypeScript-5.9.3-3178c6?logo=typescript&logoColor=white)
![Node.js](https://img.shields.io/badge/Node.js-‚â•18.0.0-339933?logo=node.js&logoColor=white)
![ESBuild](https://img.shields.io/badge/ESBuild-0.27.0-FFCF00?logo=esbuild&logoColor=black)
![Version](https://img.shields.io/badge/–í–µ—Ä—Å–∏—è-0.1.0-blue)
[![License](https://img.shields.io/badge/–õ–∏—Ü–µ–Ω–∑–∏—è-Apache%202.0-blue.svg)](./LICENSE)
[![Architecture](https://img.shields.io/badge/–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-EN-blueviolet)](./ARCHITECTURE.md)
[![Architecture RU](https://img.shields.io/badge/–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-RU-blueviolet)](./ARCHITECTURE.ru.md)

## AI –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

[![DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/pavelpikta/cf-jacred-fdb)

> ‚ö†Ô∏è **–†–∞–Ω–Ω—è—è –∞–ª—å—Ñ–∞**: –ü—É–±–ª–∏—á–Ω–æ–µ API –∏ HTML-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∫–æ–º–º–∏—Ç, –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏—Ç–µ –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

Edge-—É—Å–∫–æ—Ä–µ–Ω–Ω—ã–π UI –¥–ª—è –º–µ—Ç–∞–ø–æ–∏—Å–∫–∞ —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤ + –¥–∞—à–±–æ—Ä–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—Ä–µ–∫–µ—Ä–æ–≤ –Ω–∞ –±–∞–∑–µ Cloudflare Pages —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º Worker (`_worker.js`), –∫–æ—Ç–æ—Ä—ã–π –≤—ã—Å—Ç—É–ø–∞–µ—Ç API-—à–ª—é–∑–æ–º, —Å–ª–æ–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∫–µ—à–∏—Ä—É—é—â–∏–º –ø—Ä–æ–∫—Å–∏ –∏ –ø–æ–º–æ—â–Ω–∏–∫–æ–º –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å TorrServer.

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [HTTP API](#http-api)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–°–±–æ—Ä–∫–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Å–±–æ—Ä–∫–∞-–∏-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TorrServer](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-torrserver)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API-–∫–ª—é—á–æ–º](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-api-–∫–ª—é—á–æ–º)
- [–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è](#—Å—Ç—Ä–∞—Ç–µ–≥–∏—è-–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
- [–û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞](#–æ—Ç–ª–∞–¥–∫–∞-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
- [–ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è](#–∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è)
- [–í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç](#–≤–∫–ª–∞–¥-–≤-–ø—Ä–æ–µ–∫—Ç)
- [FAQ](#faq)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–∞ –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

### 1. –ü–æ–∏—Å–∫ —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤ (`/`)

- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ —Å –æ–ø—Ü–∏–µ–π —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
- –ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –∫–∞—á–µ—Å—Ç–≤–æ, –æ–∑–≤—É—á–∫–∞, –≥–æ–¥, —Å–µ–∑–æ–Ω, —Ç—Ä–µ–∫–µ—Ä, –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- –§–∏–ª—å—Ç—Ä—ã —É—Ç–æ—á–Ω–µ–Ω–∏—è –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É
- –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–∏–¥–∞–º, —Ä–∞–∑–º–µ—Ä—É –∏–ª–∏ –¥–∞—Ç–µ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TorrServer –¥–ª—è –ø—Ä—è–º–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ magnet-—Å—Å—ã–ª–æ–∫
- –ò–∫–æ–Ω–∫–∏ —Ç—Ä–µ–∫–µ—Ä–æ–≤ –∏ —Ü–≤–µ—Ç–æ–≤—ã–µ –±–µ–π–¥–∂–∏

### 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–µ–∫–µ—Ä–æ–≤ (`/stats`)

- –ñ–∏–≤–æ–π –¥–∞—à–±–æ—Ä–¥ —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º (10 –º–∏–Ω—É—Ç)
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Ç–æ–≥–∏ –ø–æ –≤—Å–µ–º —Ç—Ä–µ–∫–µ—Ä–∞–º
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (confirm/wait/skip)
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö (>7 –¥–Ω–µ–π, >90 –¥–Ω–µ–π)
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã (—Ç—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è)
- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –∏ —à–∏—Ä–æ–∫–∏–π —Ä–µ–∂–∏–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —á–∏—Å–µ–ª (—Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π/–ø–æ–ª–Ω—ã–π)

### –§—É–Ω–∫—Ü–∏–∏ Worker

Cloudflare Worker –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- **API Gateway**: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è `/api/*` –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∞–ø—Å—Ç—Ä–∏–º—É —Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º –ø—É—Ç–µ–π
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í–∞–ª–∏–¥–∞—Ü–∏—è API-–∫–ª—é—á–∞, —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, CORS
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Edge-–∫–µ—à —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ETag/304, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–π –∫–µ—à–∞
- **TorrServer Proxy**: –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è magnet –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å—Å–µ—Ç—ã**: –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Å—Å–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ –º–∞–Ω–∏—Ñ–µ—Å—Ç

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –§—É–Ω–∫—Ü–∏—è                    | –û–ø–∏—Å–∞–Ω–∏–µ                                                  |
| -------------------------- | --------------------------------------------------------- |
| **Edge-–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**       | 60—Å –±—Ä–∞—É–∑–µ—Ä / 300—Å edge TTL —Å ETag-—Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π           |
| **–•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Å—Å–µ—Ç—ã**    | –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–π –∫–µ—à –Ω–∞ 1 –≥–æ–¥ –¥–ª—è CSS/JS —Å –æ—Ç–ø–µ—á–∞—Ç–∫–æ–º        |
| **API-–∫–ª—é—á**               | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª—é—á–µ–π    |
| **TorrServer**             | –ü—Ä–æ–∫—Å–∏ –∏ –ø—Ä—è–º–æ–π —Ä–µ–∂–∏–º—ã —Å Basic Auth + CF Access           |
| **i18n**                   | –†—É—Å—Å–∫–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö  |
| **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** | X-Frame-Options, CSP-ready, CORS, Referrer-Policy         |
| **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π UI**          | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏ –¥–ª—è —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ |

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Å wrangler dev —Å–µ—Ä–≤–µ—Ä–æ–º)
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω —Å–±–æ—Ä–∫–∞
npm run build:prod

# –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–¥–∞–∫—à–Ω —Å–±–æ—Ä–∫–∏
wrangler pages dev dist
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: Node.js ‚â•18.0.0

---

## HTTP API

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å—Å–µ—Ç—ã

| –ü—É—Ç—å                               | –û–ø–∏—Å–∞–Ω–∏–µ                 |
| ---------------------------------- | ------------------------ |
| `/`                                | UI –ø–æ–∏—Å–∫–∞ (`index.html`) |
| `/stats`, `/stats/`, `/stats.html` | –î–∞—à–±–æ—Ä–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏       |
| `/css/*`, `/js/*`, `/img/*`        | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å—Å–µ—Ç—ã       |

### API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –≠–Ω–¥–ø–æ–∏–Ω—Ç                       | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ                           |
| ------------------------------ | ----- | ---------------------------------- |
| `/api/conf`                    | GET   | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è API-–∫–ª—é—á–∞ |
| `/api/torrents?search=&exact=` | GET   | –ü–æ–∏—Å–∫ —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤                    |
| `/api/stats/torrents`          | GET   | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–µ–∫–µ—Ä–æ–≤                |
| `/api/torrserver/add`          | POST  | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ magnet –≤ TorrServer     |
| `/api/torrserver/test`         | POST  | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å TorrServer   |

### –ü—Ä—è–º—ã–µ passthrough-–ø—É—Ç–∏

–≠—Ç–∏ –ø—É—Ç–∏ –æ–±—Ö–æ–¥—è—Ç –ª–æ–≥–∏–∫—É `/api` –∏ –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –∫ –∞–ø—Å—Ç—Ä–∏–º—É:

| –ü—É—Ç—å            | –û–ø–∏—Å–∞–Ω–∏–µ                            |
| --------------- | ----------------------------------- |
| `/stats/*`      | –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∞–ø—Å—Ç—Ä–∏–º–∞       |
| `/sync/*`       | –û–ø–µ—Ä–∞—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏              |
| `/lastupdatedb` | –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î (–±–µ–∑ API-–∫–ª—é—á–∞) |
| `/health`       | Health check (–±–µ–∑ API-–∫–ª—é—á–∞)        |

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤

**–ü–æ–∏—Å–∫:**

```http
GET /api/torrents?search=matrix&apikey=–í–ê–®_–ö–õ–Æ–ß&exact=true
```

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ TorrServer:**

```http
POST /api/torrserver/add
Content-Type: application/json

{
  "magnet": "magnet:?xt=urn:btih:...",
  "url": "http://localhost:8090",
  "username": "admin",
  "password": "secret",
  "debug": false
}
```

**–¢–µ—Å—Ç TorrServer:**

```http
POST /api/torrserver/test
Content-Type: application/json

{
  "url": "http://localhost:8090",
  "username": "admin",
  "password": "secret"
}
```

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –ø–∞–Ω–µ–ª–∏ Cloudflare Pages –∏–ª–∏ `wrangler.toml`:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è                | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é               | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
| ------------------------- | ----------- | -------------------------- | ------------------------------------------- |
| `UPSTREAM_ORIGIN`         | –î–∞          | `http://redapi.cfhttp.top` | Origin –∞–ø—Å—Ç—Ä–∏–º API                          |
| `API_KEY`                 | –ù–µ—Ç         | ‚Äî                          | API-–∫–ª—é—á–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏     |
| `UPSTREAM_TIMEOUT_MS`     | –ù–µ—Ç         | `30000`                    | –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∞–ø—Å—Ç—Ä–∏–º—É                 |
| `TORRSERVER_TIMEOUT_MS`   | –ù–µ—Ç         | `15000`                    | –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ TorrServer               |
| `CF_ACCESS_CLIENT_ID`     | –ù–µ—Ç         | ‚Äî                          | Cloudflare Access client ID                 |
| `CF_ACCESS_CLIENT_SECRET` | –ù–µ—Ç         | ‚Äî                          | Cloudflare Access client secret             |
| `ERROR_LOCALE`            | –ù–µ—Ç         | `ru`                       | –õ–æ–∫–∞–ª—å —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö (`en` –∏–ª–∏ `ru`) |

---

## –°–±–æ—Ä–∫–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### NPM-—Å–∫—Ä–∏–ø—Ç—ã

| –ö–æ–º–∞–Ω–¥–∞              | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
| -------------------- | ------------------------------------------- |
| `npm run dev`        | –°–±–æ—Ä–∫–∞ + wrangler dev —Å–µ—Ä–≤–µ—Ä                |
| `npm run build`      | –î–µ–≤–µ–ª–æ–ø–º–µ–Ω—Ç —Å–±–æ—Ä–∫–∞                          |
| `npm run build:prod` | –ü—Ä–æ–¥–∞–∫—à–Ω —Å–±–æ—Ä–∫–∞ (–º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è + —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| `npm run typecheck`  | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript                   |
| `npm run lint`       | ESLint                                      |
| `npm run format`     | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Prettier                     |
| `npm run watch`      | Watch-—Ä–µ–∂–∏–º –¥–ª—è –∞—Å—Å–µ—Ç–æ–≤ + worker            |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

<!-- markdownlint-disable MD040 -->

```
cf-jacred-fdb/
‚îú‚îÄ‚îÄ src/                    # TypeScript –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ Worker
‚îÇ   ‚îú‚îÄ‚îÄ worker.ts           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.ts           # –†–µ–∑–æ–ª–≤–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ lib/                # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ apiKey.ts       # –ü–∞—Ä—Å–∏–Ω–≥/–≤–∞–ª–∏–¥–∞—Ü–∏—è API-–∫–ª—é—á–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assets.ts       # –õ–æ–≥–∏–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Å—Å–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.ts    # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors.ts       # –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fetching.ts     # Fetch —Å —Ç–∞–π–º–∞—É—Ç–æ–º/–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ i18n.ts         # –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manifest.ts     # –ú–∞–Ω–∏—Ñ–µ—Å—Ç —Ö–µ—à–µ–π –∞—Å—Å–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routing.ts      # –ü—Ä–∞–≤–∏–ª–∞ –º–∞–ø–ø–∏–Ω–≥–∞ –ø—É—Ç–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.ts     # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ torrserver.ts   # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ TorrServer
‚îÇ   ‚îî‚îÄ‚îÄ middleware/         # –ö–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ index.ts        # –≠–∫—Å–ø–æ—Ä—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ types.ts        # –¢–∏–ø—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ statsAsset.ts   # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ /stats
‚îÇ       ‚îú‚îÄ‚îÄ staticAsset.ts  # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ methodAndCors.ts# –í–∞–ª–∏–¥–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ + CORS
‚îÇ       ‚îú‚îÄ‚îÄ torrserver.ts   # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã TorrServer
‚îÇ       ‚îú‚îÄ‚îÄ conf.ts         # –≠–Ω–¥–ø–æ–∏–Ω—Ç /api/conf
‚îÇ       ‚îî‚îÄ‚îÄ upstream.ts     # –ü—Ä–æ–∫—Å–∏ –∫ –∞–ø—Å—Ç—Ä–∏–º—É
‚îú‚îÄ‚îÄ public/                 # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å—Å–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.html          # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ stats.html          # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ css/                # –°—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ js/                 # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π JavaScript
‚îÇ   ‚îî‚îÄ‚îÄ img/                # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∏–∫–æ–Ω–∫–∏
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ copy-static.mjs     # –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ dist/                   # –í—ã—Ö–æ–¥–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (gitignored)
‚îú‚îÄ‚îÄ wrangler.toml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Cloudflare
‚îú‚îÄ‚îÄ tsconfig.json           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
‚îî‚îÄ‚îÄ package.json            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
```

<!-- markdownlint-enable MD040 -->

---

## –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Cloudflare Pages

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç Pages —Å –∏–º–µ–Ω–µ–º `cf-jacred-fdb` (–∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ `wrangler.toml`)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ Pages
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥—É —Å–±–æ—Ä–∫–∏: `npm run build:prod`
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—ã—Ö–æ–¥–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é: `dist`
5. Push –≤ Git-–≤–µ—Ç–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

### –†—É—á–Ω–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
npm run build:prod
wrangler pages deploy dist
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤

–í—Å–µ –æ—Ç–≤–µ—Ç—ã –≤–∫–ª—é—á–∞—é—Ç:

| –ó–∞–≥–æ–ª–æ–≤–æ–∫                      | –ó–Ω–∞—á–µ–Ω–∏–µ                                                      |
| ------------------------------ | ------------------------------------------------------------- |
| `X-Content-Type-Options`       | `nosniff`                                                     |
| `Referrer-Policy`              | `no-referrer`                                                 |
| `X-Frame-Options`              | `DENY`                                                        |
| `Cross-Origin-Opener-Policy`   | `same-origin`                                                 |
| `Cross-Origin-Resource-Policy` | `same-origin`                                                 |
| `Permissions-Policy`           | `geolocation=(), microphone=(), camera=(), fullscreen=(self)` |

### CORS

–û—Ç–∫—Ä—ã—Ç–∞—è CORS-–ø–æ–ª–∏—Ç–∏–∫–∞ (`*`) –¥–ª—è API-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

### –ó–∞—â–∏—Ç–∞ API-–∫–ª—é—á–∞

- –ö–ª—é—á–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∞–ø—Å—Ç—Ä–∏–º—É –∏ –∫–ª—é—á–µ–π –∫–µ—à–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª—é—á–µ–π (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –≤ `API_KEY`)
- –ò—Å–∫–ª—é—á—ë–Ω–Ω—ã–µ –ø—É—Ç–∏: `/lastupdatedb`, `/health`

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- XSS-–∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ HTML
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è URL (—É–¥–∞–ª–µ–Ω–∏–µ `javascript:` –ø—Ä–æ—Ç–æ–∫–æ–ª–∞)
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ Web Crypto API (AES-GCM)
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TorrServer

### –†–µ–∂–∏–º—ã

1. **–ü—Ä–æ–∫—Å–∏-—Ä–µ–∂–∏–º** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): –ë—Ä–∞—É–∑–µ—Ä ‚Üí Worker ‚Üí TorrServer
   - –û–±—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—ã CORS
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã CF Access
   - –ù–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∏—á—å –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Å–µ—Ç–µ–π

2. **–ü—Ä—è–º–æ–π —Ä–µ–∂–∏–º**: –ë—Ä–∞—É–∑–µ—Ä ‚Üí TorrServer
   - –¢—Ä–µ–±—É–µ—Ç CORS –∏–ª–∏ same-origin
   - –†–∞–±–æ—Ç–∞–µ—Ç —Å LAN-—Å–µ—Ä–≤–µ—Ä–∞–º–∏
   - –ù—É–∂–Ω—ã —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ AES-GCM + PBKDF2
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –•—Ä–∞–Ω–∏–ª–∏—â–µ: sessionStorage (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ localStorage
- Fallback –Ω–∞ session memory –µ—Å–ª–∏ crypto –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ TorrServer" –≤ UI –ø–æ–∏—Å–∫–∞:

- URL TorrServer
- –õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø—Ä—è–º–æ–≥–æ —Ä–µ–∂–∏–º–∞
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—è

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API-–∫–ª—é—á–æ–º

### –ü—Ä–æ—Ü–µ—Å—Å

1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ `/api/conf`
2. –ï—Å–ª–∏ `requireApiKey: true` –∏ –Ω–µ—Ç –≤–∞–ª–∏–¥–Ω–æ–≥–æ –∫–ª—é—á–∞ ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
3. –ö–ª—é—á –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ `/api/conf?apikey=...`
4. –í–∞–ª–∏–¥–Ω—ã–π –∫–ª—é—á —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage.api_key`
5. –ö–ª—é—á –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ API-–∑–∞–ø—Ä–æ—Å–∞–º, —É–¥–∞–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∞–ø—Å—Ç—Ä–∏–º–æ–º

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π API

```javascript
// –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–ª—é—á –¥–æ—Å—Ç—É–ø–µ–Ω –ø–µ—Ä–µ–¥ API-–≤—ã–∑–æ–≤–∞–º–∏
ApiKey.ensure(() => {
  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–µ–ª–∞—Ç—å API-–≤—ã–∑–æ–≤—ã
});

// –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –∫–ª—é—á
const key = ApiKey.get();

// –°–±—Ä–æ—Å–∏—Ç—å –∫–ª—é—á (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å)
ApiKey.reset();
```

---

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

| –¢–∏–ø –∞—Å—Å–µ—Ç–∞            | Cache-Control                         | –ü–æ–≤–µ–¥–µ–Ω–∏–µ Edge         |
| --------------------- | ------------------------------------- | ---------------------- |
| HTML-—Ñ–∞–π–ª—ã            | `no-cache, must-revalidate`           | –í—Å–µ–≥–¥–∞ —Ä–µ–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è  |
| –•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Å—Å–µ—Ç—ã   | `public, max-age=31536000, immutable` | –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –∫–µ—à       |
| –ù–µ—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ CSS/JS | `public, max-age=3600`                | 1 —á–∞—Å                  |
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/—à—Ä–∏—Ñ—Ç—ã    | `public, max-age=604800`              | 1 –Ω–µ–¥–µ–ª—è               |
| API-–æ—Ç–≤–µ—Ç—ã            | `public, max-age=60, s-maxage=300`    | 60—Å –±—Ä–∞—É–∑–µ—Ä, 5–º–∏–Ω edge |

### –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–∞ –∫–µ—à–∞

–£–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –∫–ª—é—á–∞ –∫–µ—à–∞:

- `apikey`, `api_key` (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é)
- `_` (–ø–∞—Ä–∞–º–µ—Ç—Ä cache-busting)

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Cache-Control: no-cache` –¥–ª—è –æ–±—Ö–æ–¥–∞ –∫–µ—à–∞.

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–æ–π

```json
{
  "error": "–ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",
  "code": "error_code",
  "locale": "ru",
  "messageKey": "i18n_key"
}
```

### HTTP-—Å—Ç–∞—Ç—É—Å—ã

| –°—Ç–∞—Ç—É—Å | –ü—Ä–∏—á–∏–Ω–∞                                                   |
| ------ | --------------------------------------------------------- |
| 400    | –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å, –æ—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—É—Ç–∏, –ø–ª–æ—Ö–æ–π JSON |
| 403    | –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π/–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π API-–∫–ª—é—á                         |
| 404    | –ê—Å—Å–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω                                           |
| 405    | –ú–µ—Ç–æ–¥ –Ω–µ —Ä–∞–∑—Ä–µ—à—ë–Ω                                         |
| 502    | –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ –∞–ø—Å—Ç—Ä–∏–º–∞/TorrServer                        |
| 504    | –¢–∞–π–º–∞—É—Ç –∞–ø—Å—Ç—Ä–∏–º–∞/TorrServer                               |

---

## –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

| –ó–∞–¥–∞—á–∞                      | –ú–µ—Ç–æ–¥                                                    |
| --------------------------- | -------------------------------------------------------- |
| –ü–æ–∫–∞–∑–∞—Ç—å URL –∞–ø—Å—Ç—Ä–∏–º–∞       | –ó–∞–≥–æ–ª–æ–≤–æ–∫ `x-debug-upstream: 1` ‚Üí –æ—Ç–≤–µ—Ç `X-Upstream-URL` |
| –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è worker       | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Server-Timing: edge;dur=<ms>`       |
| –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–≤–µ–∂–∏–π fetch | –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–ø—Ä–æ—Å–∞ `Cache-Control: no-cache`              |
| –û—Ç–ª–∞–¥–∫–∞ TorrServer          | `"debug": true` –≤ —Ç–µ–ª–µ POST                              |
| –û—Ç–ª–∞–¥–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞             | `localStorage.setItem('torrserver_debug', '1')`          |

---

## –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ª–æ–∫–∞–ª–∏

- `ru` (—Ä—É—Å—Å–∫–∏–π) ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `en` (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `ERROR_LOCALE` –≤ `en` –¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö.

### –ö–ª—é—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

```typescript
type MsgKey =
  | 'not_found'
  | 'bad_request'
  | 'method_not_allowed'
  | 'forbidden'
  | 'upstream_timeout'
  | 'upstream_fetch_failed'
  | 'torrserver_timeout'
  | 'torrserver_network'
  | 'torrserver_all_attempts_failed'
  | 'missing_url'
  | 'invalid_url'
  | 'expect_json_body'
  | 'invalid_magnet'
  | 'auth_credentials_mismatch'
  | 'auth_error_hint'
  | 'auth_error_hint_tokens'
  | 'path_decode_error'
  | 'path_map_error';
```

---

## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork –∏ —Å–æ–∑–¥–∞–Ω–∏–µ feature-–≤–µ—Ç–∫–∏
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run typecheck` –∏ `npm run lint` –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å `npm run build:prod`
4. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö API/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ pull request

### –°—Ç–∏–ª—å –∫–æ–¥–∞

- TypeScript —Å–æ strict mode
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ESLint + Prettier
- –û–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏
- JSDoc –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

## FAQ

**–í: –ü–æ—á–µ–º—É query-–ø–∞—Ä–∞–º–µ—Ç—Ä –≤–º–µ—Å—Ç–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è API-–∫–ª—é—á–∞?**  
–û: –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å URL. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

**–í: –ü–æ—á–µ–º—É –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è HTTP-–∞–ø—Å—Ç—Ä–∏–º?**  
–û: TLS —Ç–µ—Ä–º–∏–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞ edge Cloudflare. –ê–ø—Å—Ç—Ä–∏–º –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—Å–µ–≥–¥–∞ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –ø–æ HTTPS.

**–í: –ï—Å—Ç—å –ª–∏ rate limiting?**  
–û: –ü–æ–∫–∞ –Ω–µ—Ç. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ Turnstile –∏–ª–∏ per-IP –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è—Ö.

**–í: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É?**  
–û: –ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤ `public/`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ –∞—Å—Å–µ—Ç–∞–º, –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ. –û—Ç–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏.

**–í: –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å API-–∫–ª—é—á –≤ preview?**  
–û: –î–∞, –æ—Å—Ç–∞–≤—å—Ç–µ `API_KEY` –ø—É—Å—Ç—ã–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Pages preview.

**–í: –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫ –æ—à–∏–±–æ–∫?**  
–û: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `ERROR_LOCALE=en`.

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

<!-- markdownlint-disable MD040 -->

```
–õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥ Apache License, Version 2.0 ("–õ–∏—Ü–µ–Ω–∑–∏—è");
–≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏–Ω–∞—á–µ –∫–∞–∫ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –õ–∏—Ü–µ–Ω–∑–∏–µ–π.
–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–ø–∏—é –õ–∏—Ü–µ–Ω–∑–∏–∏ –ø–æ –∞–¥—Ä–µ—Å—É

  https://www.apache.org/licenses/LICENSE-2.0

–ï—Å–ª–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–∏–º—ã–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –∏–ª–∏ –Ω–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ –ø–∏—Å—å–º–µ–Ω–Ω–æ,
–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ–º–æ–µ –ø–æ –õ–∏—Ü–µ–Ω–∑–∏–∏, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è
–Ω–∞ —É—Å–ª–æ–≤–∏—è—Ö "–ö–ê–ö –ï–°–¢–¨", –ë–ï–ó –ö–ê–ö–ò–•-–õ–ò–ë–û –ì–ê–†–ê–ù–¢–ò–ô –ò–õ–ò –£–°–õ–û–í–ò–ô,
—è–≤–Ω—ã—Ö –∏–ª–∏ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ–º—ã—Ö. –°–º. –õ–∏—Ü–µ–Ω–∑–∏—é –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —è–∑—ã–∫–∞,
—Ä–µ–≥—É–ª–∏—Ä—É—é—â–µ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –õ–∏—Ü–µ–Ω–∑–∏–∏.
```

<!-- markdownlint-enable MD040 -->

–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç: [LICENSE](./LICENSE)

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ issue —Å:

- –®–∞–≥–∞–º–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –û–∂–∏–¥–∞–µ–º—ã–º vs —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º
- URL –∑–∞–ø—Ä–æ—Å–∞ –∏ –º–µ—Ç–æ–¥–æ–º
- –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏/JSON (–µ—Å–ª–∏ –Ω–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ)
- –°–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏/HAR –¥–ª—è –ø—Ä–æ–±–ª–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

üîÅ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫: [English version](./README.md)
